<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lausete Äraarvamise Mäng</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
            overflow: hidden;
        }

        .letter-box {
            width: 3.5rem;
            height: 4.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: 900;
            border-bottom: 4px solid #334155;
            margin: 0.25rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .letter-box.filled {
            border: 2px solid #3b82f6;
            background: #1e293b;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        }

        .letter-box.revealed {
            background: #3b82f6;
            border-color: #60a5fa;
            color: white;
            transform: rotateY(360deg);
        }

        .active-team {
            transform: scale(1.05);
            ring: 4px;
            ring-color: white;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
        }

        #phraseContainer {
            perspective: 1000px;
        }
    </style>
</head>
<body class="h-screen flex flex-col p-6 overflow-hidden">

    <!-- Päis: Punktid ja Info -->
    <div class="flex justify-between items-start mb-4">
        <!-- Tiim A -->
        <div id="teamAContainer" class="bg-blue-600 p-4 rounded-xl border-4 border-blue-400 text-center min-w-[160px] shadow-2xl transition-all duration-500">
            <h2 class="text-xl font-bold uppercase tracking-tight">Tiim A</h2>
            <div id="scoreA" class="text-5xl font-black">0</div>
            <div class="mt-2 flex justify-center gap-2">
                <button onclick="changeScore('A', -10)" class="bg-blue-800 hover:bg-blue-900 px-4 py-1 rounded shadow-inner">-10</button>
                <button onclick="changeScore('A', 10)" class="bg-blue-300 hover:bg-blue-200 text-blue-900 px-4 py-1 rounded font-bold shadow-md">+10</button>
            </div>
        </div>

        <!-- Kategooria ja Teavitused -->
        <div class="text-center flex-1 px-4 mt-6">
            <div id="categoryDisplay" class="text-2xl font-bold text-blue-400 uppercase tracking-[0.3em] mb-1">KATEGOORIA</div>
            <div id="turnInfo" class="text-emerald-400 font-bold uppercase tracking-widest animate-pulse">Tiim A kord</div>
        </div>

        <!-- Tiim B -->
        <div id="teamBContainer" class="bg-rose-600 p-4 rounded-xl border-4 border-rose-400 text-center min-w-[160px] shadow-2xl transition-all duration-500 opacity-50">
            <h2 class="text-xl font-bold uppercase tracking-tight">Tiim B</h2>
            <div id="scoreB" class="text-5xl font-black">0</div>
            <div class="mt-2 flex justify-center gap-2">
                <button onclick="changeScore('B', -10)" class="bg-rose-800 hover:bg-rose-900 px-4 py-1 rounded shadow-inner">-10</button>
                <button onclick="changeScore('B', 10)" class="bg-rose-300 hover:bg-rose-200 text-rose-900 px-4 py-1 rounded font-bold shadow-md">+10</button>
            </div>
        </div>
    </div>

    <!-- Mänguväli -->
    <div class="flex-grow flex items-center justify-center py-10">
        <div id="phraseContainer" class="flex flex-wrap justify-center items-center max-w-7xl gap-y-12"></div>
    </div>

    <!-- Pakutud tähed -->
    <div class="mb-6 text-center">
        <div class="text-xs uppercase tracking-[0.5em] text-slate-500 mb-3 font-bold">Pakutud tähed</div>
        <div id="usedLetters" class="text-3xl font-bold tracking-[0.4em] min-h-[3rem] flex justify-center items-center flex-wrap gap-2"></div>
    </div>

    <!-- Alumine paneel -->
    <div class="mt-auto flex justify-between items-center bg-slate-900/50 p-4 rounded-2xl border border-slate-800">
        <div class="flex gap-4">
            <button id="newGameBtn" onclick="newGame()" class="bg-emerald-500 hover:bg-emerald-400 text-emerald-950 font-black py-3 px-10 rounded-xl text-xl shadow-lg transition-transform active:scale-95">UUS LAUSE</button>
            <button onclick="revealAll()" class="bg-slate-700 hover:bg-slate-600 text-slate-200 py-3 px-6 rounded-xl text-lg font-bold">NÄITA VASTUST</button>
        </div>
        
        <div class="flex gap-10 items-center">
            <div class="text-slate-400 text-sm font-medium leading-tight">
                <span class="text-blue-400 font-bold">TÄHED:</span> Paku tähte<br>
                <span class="text-blue-400 font-bold">TAB:</span> Vaheta tiimi manuaalselt
            </div>
            <div class="text-slate-400 text-sm font-medium leading-tight text-right">
                <span class="text-blue-400 font-bold">ENTER:</span> Järgmine lause<br>
                <span class="text-blue-400 font-bold">SPACE:</span> Fookus uuele nupule
            </div>
        </div>
    </div>

    <script>
        const gameData = [
            { phrase: "Aeg parandab haavad aga jätab armid", category: "Vanasõna" },
            { phrase: "Ahnus ajab auku", category: "Vanasõna" },
            { phrase: "Ametil on kuldpõhi all", category: "Vanasõna" },
            { phrase: "Ega magajale kassile hiir suhu jookse", category: "Vanasõna" },
            { phrase: "Enne mõtle pärast ütle", category: "Vanasõna" },
            { phrase: "Esimene vasikas läheb ikka aia taha", category: "Vanasõna" },
            { phrase: "Hulk kokki teeb lahja leeme", category: "Vanasõna" },
            { phrase: "Hundid söönud lambad terved", category: "Vanasõna" },
            { phrase: "Häda ajab härja kaevu", category: "Vanasõna" },
            { phrase: "Iga algus on raske", category: "Vanasõna" },
            { phrase: "Kus viga näed laita seal tule ja aita", category: "Vanasõna" },
            { phrase: "Käbi ei kuku kännust kaugele", category: "Vanasõna" },
            { phrase: "Töö kardab meistrit", category: "Vanasõna" },
            { phrase: "Töö kiidab tegijat", category: "Vanasõna" },
            { phrase: "Uus luud pühib toa puhtaks", category: "Vanasõna" },
            { phrase: "Vaga vesi sügav põhi", category: "Vanasõna" },
            { phrase: "Veerevale kivile ei kasva sammalt", category: "Vanasõna" },
            { phrase: "Hooletus ees õnnetus taga", category: "Vanasõna" },
            { phrase: "Parem varblane peos kui tuvi katusel", category: "Vanasõna" },
            { phrase: "Mida Juku ei õpi seda Juhan ei tea", category: "Vanasõna" }
        ];

        let currentPhrase = "";
        let guessedLetters = new Set();
        let scoreA = 0;
        let scoreB = 0;
        let activeTeam = 'A';

        function updateScoreDisplays() {
            document.getElementById('scoreA').innerText = scoreA;
            document.getElementById('scoreB').innerText = scoreB;
        }

        function changeScore(team, amount) {
            if (team === 'A') {
                scoreA = Math.max(0, scoreA + amount);
            } else {
                scoreB = Math.max(0, scoreB + amount);
            }
            updateScoreDisplays();
        }

        function switchTeam() {
            activeTeam = activeTeam === 'A' ? 'B' : 'A';
            document.getElementById('teamAContainer').classList.toggle('opacity-50', activeTeam !== 'A');
            document.getElementById('teamBContainer').classList.toggle('opacity-50', activeTeam !== 'B');
            
            const turnInfo = document.getElementById('turnInfo');
            turnInfo.innerText = `Tiim ${activeTeam} kord`;
            turnInfo.className = activeTeam === 'A' ? 'text-blue-400 font-bold uppercase tracking-widest animate-pulse' : 'text-rose-400 font-bold uppercase tracking-widest animate-pulse';
        }

        function newGame() {
            const data = gameData[Math.floor(Math.random() * gameData.length)];
            currentPhrase = data.phrase.toUpperCase();
            guessedLetters.clear();
            
            document.getElementById('categoryDisplay').innerText = data.category;
            document.getElementById('usedLetters').innerHTML = "";
            
            renderPhrase();
        }

        function renderPhrase() {
            const container = document.getElementById('phraseContainer');
            container.innerHTML = "";
            
            const words = currentPhrase.split(" ");
            
            words.forEach(word => {
                const wordDiv = document.createElement('div');
                wordDiv.className = "flex mx-4 mb-2"; 
                
                [...word].forEach(char => {
                    const box = document.createElement('div');
                    const isLetter = /[A-ZÕÄÖÜ]/.test(char);
                    
                    if (isLetter) {
                        box.className = "letter-box filled";
                        if (guessedLetters.has(char)) {
                            box.innerText = char;
                            box.classList.add('revealed');
                        }
                    } else {
                        box.className = "letter-box revealed"; 
                        box.innerText = char;
                        box.style.borderBottom = "none";
                        box.style.background = "transparent";
                    }
                    wordDiv.appendChild(box);
                });
                
                container.appendChild(wordDiv);
            });
        }

        function handleGuess(letter) {
            if (!currentPhrase || guessedLetters.has(letter)) return;
            
            guessedLetters.add(letter);
            
            const usedEl = document.getElementById('usedLetters');
            const span = document.createElement('span');
            span.innerText = letter;
            
            const letterCount = currentPhrase.split(letter).length - 1;

            if (letterCount > 0) {
                // Õige pakkumine: lisa punkte aktiivsele tiimile
                const pointsToAdd = letterCount * 10;
                if (activeTeam === 'A') scoreA += pointsToAdd;
                else scoreB += pointsToAdd;
                
                span.className = "text-blue-400 px-2 animate-bounce";
                updateScoreDisplays();
            } else {
                // Vale pakkumine: vaheta tiimi
                span.className = "text-slate-600 px-2";
                switchTeam();
            }
            
            usedEl.appendChild(span);
            renderPhrase();
        }

        function revealAll() {
            [...currentPhrase].forEach(char => {
                if (/[A-ZÕÄÖÜ]/.test(char)) guessedLetters.add(char);
            });
            renderPhrase();
        }

        document.addEventListener('keydown', (e) => {
            const key = e.key.toUpperCase();
            
            if (key === 'ENTER') {
                newGame();
            } else if (key === 'TAB') {
                e.preventDefault();
                switchTeam();
            } else if (key === ' ') {
                document.getElementById('newGameBtn').focus();
            } else if (/^[A-ZÕÄÖÜ]$/.test(key)) {
                handleGuess(key);
            }
        });

        window.onload = newGame;
    </script>
</body>
</html>
